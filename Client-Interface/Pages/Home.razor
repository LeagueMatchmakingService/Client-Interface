@page "/"
@using System.Text.Json
@inject IJSRuntime JSRuntime

<div class="hero-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="left-content">
                    <div class="content">
                        <h5 class="subtitle">
                            Matchmaking Service
                        </h5>
                        <h1 class="title">
                            for League of Legends
                        </h1>
                        @*<p class="text">
                            Play, and rise your MMR to reach the top of the leaderboard
                        </p>*@
                        <div class="links">
                            <NavLink href="Matchmaking" class="mybtn1" data-toggle="modal" data-target="#signin">PLAY NOW</NavLink>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {

    private string _divObjective = string.Empty;
    private string _divPlatform = string.Empty;
    private string _divVersion = string.Empty;

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        if (firstRender)
        {
            var jsRequest = new JSRequest();
            jsRequest.Url = "/info";
            jsRequest.JSInvokeId = "HomeCallback";
            var dotNetReference = DotNetObjectReference.Create(this);
            JSRuntime.InvokeVoidAsync("MessageRouter.Get", jsRequest.ToJson(), dotNetReference);
        }
    }

    [JSInvokable("HomeCallback")]
    public void MessageRouterResponse(string respose)
    {
        var options = new JsonSerializerOptions();
        options.ReadCommentHandling = JsonCommentHandling.Skip;
        options.AllowTrailingCommas = true;
        var data = JsonSerializer.Deserialize<Dictionary<string, string>>(respose, options);

        _divObjective = data["divObjective"];
        _divPlatform = data["divPlatform"];
        _divVersion = data["divVersion"];

        StateHasChanged();
    }

}